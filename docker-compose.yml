version: '3.9'

services:
  server:
    build:
      context: ./server
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ASSISTANT_ID=${ASSISTANT_ID:-}
      - PORT=9551
    ports:
      - "9551:9551"
    networks:
      - paper-app

  client:
    build:
      context: ./client
      args:
        VITE_API_BASE_URL: http://server:9551/api
    depends_on:
      - server
    ports:
      - "9550:9550"
    networks:
      - paper-app

networks:
  paper-app:
    driver: bridge
